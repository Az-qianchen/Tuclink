<!doctype html><meta name=referrer content="no-referrer"><link rel=manifest href=/effects/manifest.webmanifest><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-title content="My PWA"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/effects/sw.js")</script><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no,maximum-scale=1,user-scalable=0"><meta name=robots content="index, follow"><title>为网站添加 WebGL 背景 | 突触递质</title>
<meta name=keywords content="WebGL,Shader,Web,背景)"><meta name=description content="WebGL 设置分享"><meta name=author content="仟尘"><link rel=canonical href=https://post.tuclink.com/zh/post/hugo/web-shader/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://post.tuclink.com/ico/64.ico><link rel=icon type=image/png sizes=16x16 href=https://post.tuclink.com/ico/16.ico><link rel=icon type=image/png sizes=32x32 href=https://post.tuclink.com/ico/32.ico><link rel=apple-touch-icon href=https://post.tuclink.com/ico/256.ico><link rel=mask-icon href=https://post.tuclink.com/ico/64.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://post.tuclink.com/zh/post/hugo/web-shader/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="为网站添加 WebGL 背景"><meta property="og:description" content="WebGL 设置分享"><meta property="og:type" content="article"><meta property="og:url" content="https://post.tuclink.com/zh/post/hugo/web-shader/"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-04-29T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-29T00:00:00+00:00"><meta property="og:site_name" content="突触递质"><meta name=twitter:card content="summary"><meta name=twitter:title content="为网站添加 WebGL 背景"><meta name=twitter:description content="WebGL 设置分享"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"文章","item":"https://post.tuclink.com/zh/post/"},{"@type":"ListItem","position":2,"name":"Hugo","item":"https://post.tuclink.com/zh/post/hugo/"},{"@type":"ListItem","position":3,"name":"为网站添加 WebGL 背景","item":"https://post.tuclink.com/zh/post/hugo/web-shader/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"为网站添加 WebGL 背景","name":"为网站添加 WebGL 背景","description":"WebGL 设置分享","keywords":["WebGL,Shader,Web,背景)"],"articleBody":" 以下为核心的 HTML 代码，可以直接复制粘贴到网站的 HTML 文件中 我对 HTML 并不是非常熟悉，所以很可能有更好的实现方式，欢迎大家指正\n\u003c!DOCTYPE html\u003e \u003chtml\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003eWebGL Example\u003c/title\u003e \u003cstyle\u003e body, html { margin: 0; padding: 0; overflow: hidden; } #webgl-container { position: relative; width: 100vw; height: 100vh; overflow: hidden; } #webgl-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; } \u003c/style\u003e \u003c/head\u003e \u003cbody\u003e \u003cdiv id=\"webgl-container\"\u003e \u003ccanvas id=\"webgl-canvas\"\u003e\u003c/canvas\u003e \u003c/div\u003e \u003cscript\u003e // 初始化WebGL上下文 const canvas = document.getElementById('webgl-canvas'); const gl = canvas.getContext('webgl'); // 设置画布大小为全屏 function resizeCanvas() { canvas.width = canvas.clientWidth; canvas.height = canvas.clientHeight; gl.viewport(0, 0, canvas.width, canvas.height); } window.addEventListener('resize', resizeCanvas); resizeCanvas(); // 顶点着色器代码 const vertexShaderSource = ` attribute vec2 position; void main() { gl_Position = vec4(position, 0.0, 1.0); } `; // 片元着色器代码 const fragmentShaderSource = ` precision highp float; uniform float theme; uniform vec3 w_colour1; uniform vec3 w_colour2; uniform vec3 w_colour3; uniform vec3 w_colour4; uniform vec3 b_colour1; uniform vec3 b_colour2; uniform vec3 b_colour3; uniform vec3 b_colour4; uniform int contrast; uniform float gradual; uniform float width1; uniform float width2; uniform float scale1; uniform float scale2; uniform vec2 offset; uniform float intensity; uniform float spin_speed; uniform float spin_amount; uniform float time; uniform float canvas_width; // 新增画布宽度uniform变量 uniform float canvas_height; // 新增画布高度uniform变量 void main() { vec3 colour1 = mix(w_colour1, b_colour1, theme); vec3 colour2 = mix(w_colour2, b_colour2, theme); vec3 colour3 = mix(w_colour3, b_colour3, theme); vec3 colour4 = mix(w_colour4, b_colour4, theme); float speed = time * spin_speed; // 无拉伸屏幕 UV; vec2 uv = gl_FragCoord.xy / canvas_height; // 居中 UV float center = canvas_width / canvas_height; uv.y -= 0.5; uv.x -= 0.5 * center; uv *= 2.0; uv += offset; float uv_len = length(uv); // 获得角度信息 float angle = atan(uv.y, uv.x); // 根据距离衰减旋转 angle -= spin_amount * uv_len; // 角度旋转动画 angle += speed; // 根据距离应用旋转 uv = vec2(uv_len * cos(angle), uv_len * sin(angle)) * scale2; // UV 扭曲效果 uv *= scale1; vec2 uv2 = vec2(uv.x + uv.y); for (int i = 0; i \u003c 5; i++) { uv2 += sin(uv); uv += vec2(cos(intensity * uv2.y + speed), sin(intensity * uv2.x - speed)); uv -= cos(uv.x + uv.y) - sin(uv.x - uv.y); } // 强度值 float paint_res = smoothstep(0.0, gradual, length(uv) / scale1); // 色块划分 float c3p = 1.0 - min(width2, abs(paint_res - 0.5)) * (1.0 / width2); float c_out = max(0.0, (paint_res - (1.0 - width1))) * (1.0 / width1); float c_in = max(0.0, -(paint_res - width1)) * (1.0 / width1); float c4p = c_out + c_in; // 颜色应用 vec3 ret_col = mix(colour1, colour2, paint_res); ret_col = mix(ret_col, colour3, c3p); ret_col = mix(ret_col, colour4, c4p); gl_FragColor = vec4(ret_col * mix(uv_len / 2.0, 1.0, theme), 1.0); // gl_FragColor = vec4(uv.y); // 纯红色 } `; // 创建和编译着色器 const vertexShader = gl.createShader(gl.VERTEX_SHADER); gl.shaderSource(vertexShader, vertexShaderSource); gl.compileShader(vertexShader); const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER); gl.shaderSource(fragmentShader, fragmentShaderSource); gl.compileShader(fragmentShader); // 创建程序对象并链接着色器 const program = gl.createProgram(); gl.attachShader(program, vertexShader); gl.attachShader(program, fragmentShader); gl.linkProgram(program); // 检查链接是否成功 if (!gl.getProgramParameter(program, gl.LINK_STATUS)) { console.error('Unable to link the shader program: ' + gl.getProgramInfoLog(program)); } if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) { console.error('Failed to compile vertex shader: ' + gl.getShaderInfoLog(vertexShader)); } if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) { console.error('Failed to compile fragment shader: ' + gl.getShaderInfoLog(fragmentShader)); } if (!gl.getProgramParameter(program, gl.LINK_STATUS)) { console.error('Unable to link the shader program: ' + gl.getProgramInfoLog(program)); } // 使用程序对象 gl.useProgram(program); // 设置顶点数据 const vertexData = new Float32Array([ -1.0, 1.0, // 第一个顶点 -1.0, -1.0, // 第二个顶点 1.0, -1.0, // 第三个顶点 1.0, 1.0 // 第四个顶点 ]); // 设置变量 const uniformLocations = { theme: gl.getUniformLocation(program, 'theme'), w_colour1: gl.getUniformLocation(program, 'w_colour1'), w_colour2: gl.getUniformLocation(program, 'w_colour2'), w_colour3: gl.getUniformLocation(program, 'w_colour3'), w_colour4: gl.getUniformLocation(program, 'w_colour4'), b_colour1: gl.getUniformLocation(program, 'b_colour1'), b_colour2: gl.getUniformLocation(program, 'b_colour2'), b_colour3: gl.getUniformLocation(program, 'b_colour3'), b_colour4: gl.getUniformLocation(program, 'b_colour4'), contrast: gl.getUniformLocation(program, 'contrast'), gradual: gl.getUniformLocation(program, 'gradual'), width1: gl.getUniformLocation(program, 'width1'), width2: gl.getUniformLocation(program, 'width2'), scale1: gl.getUniformLocation(program,'scale1'), scale2: gl.getUniformLocation(program,'scale2'), offset: gl.getUniformLocation(program, 'offset'), intensity: gl.getUniformLocation(program, 'intensity'), spin_speed: gl.getUniformLocation(program,'spin_speed'), spin_amount: gl.getUniformLocation(program,'spin_amount'), time: gl.getUniformLocation(program, 'time'), canvas_width: gl.getUniformLocation(program, 'canvas_width'), canvas_height: gl.getUniformLocation(program, 'canvas_height') }; // 设置uniform变量的值 gl.uniform1f(uniformLocations.theme, 0); gl.uniform3f(uniformLocations.w_colour1, 0.0, 0.427, 0.62); gl.uniform3f(uniformLocations.w_colour2, 0.0, 0.63, 0.43); gl.uniform3f(uniformLocations.w_colour3, 1.0, 1.0, 1.0); gl.uniform3f(uniformLocations.w_colour4, 0.0, 0.0, 0.0); gl.uniform3f(uniformLocations.b_colour1, 0.0, 0.42, 0.61); gl.uniform3f(uniformLocations.b_colour2, 0.0, 0.61, 0.57); gl.uniform3f(uniformLocations.b_colour3, 1.0, 1.0, 1.0); gl.uniform3f(uniformLocations.b_colour4, 1.0, 1.0, 1.0); gl.uniform1i(uniformLocations.contrast, 5); gl.uniform1f(uniformLocations.gradual, 2.0); gl.uniform1f(uniformLocations.width1, 0.2); gl.uniform1f(uniformLocations.width2, 0.1); gl.uniform1f(uniformLocations.scale1, 10.0); gl.uniform1f(uniformLocations.scale2, 1.0); gl.uniform2f(uniformLocations.offset, 0.0, 0.0); gl.uniform1f(uniformLocations.intensity, 0.2); gl.uniform1f(uniformLocations.spin_speed, 0.2); gl.uniform1f(uniformLocations.spin_amount, 1.5); gl.uniform1f(uniformLocations.time, 1.0); gl.uniform1f(uniformLocations.canvas_width, canvas.width); gl.uniform1f(uniformLocations.canvas_height, canvas.height); const vertexBuffer = gl.createBuffer(); gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer); gl.bufferData(gl.ARRAY_BUFFER, vertexData, gl.STATIC_DRAW); const positionAttribLocation = gl.getAttribLocation(program, 'position'); gl.vertexAttribPointer( positionAttribLocation, 2, // 每个顶点有2个分量(x, y) gl.FLOAT, // 数据类型是32位浮点数 false, 2 * Float32Array.BYTES_PER_ELEMENT, // 步长 0 // 偏移量 ); gl.enableVertexAttribArray(positionAttribLocation); var a = 0; var n_a = 0; // 同步更新页面主题 window.addEventListener('storage', (event) =\u003e { if (localStorage.getItem('pref-theme') === 'dark') { a = 0; } else { a = 1; } }); // 初始化 window.dispatchEvent(new Event('storage')); // 清除画布并绘制三角形 function render() { // 实时更新的值 gl.uniform1f(uniformLocations.time, performance.now() / 1000.0); gl.uniform1f(uniformLocations.canvas_width, canvas.width); gl.uniform1f(uniformLocations.canvas_height, canvas.height); if (n_a == a) { n_a = a; } else { n_a = lerpi(n_a, a, 0.4); } gl.uniform1f(uniformLocations.theme, n_a); gl.clearColor(0.0, 0.0, 0.0, 1.0); gl.clear(gl.COLOR_BUFFER_BIT); gl.drawArrays(gl.TRIANGLE_FAN, 0, 4); requestAnimationFrame(render); } render(); // 插值 function lerpi(a, b, t) { return a + ( b - a ) * t; } \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e 只需要将以上 HTML 文件插入到页面中\n\u003ciframe id=\"webgl-background\" src=\"/html/WebGL.html\" width=\"100%\" height=\"100%\" frameborder=\"0\"\u003e\u003c/iframe\u003e 再设置一下 CSS 样式即可作为背景使用\n\u003cstyle\u003e \u003c!-- 头像缩放适配 --\u003e \u003c!-- 背景/隐藏滚动条 --\u003e \u003cstyle\u003e iframe#webgl-background { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: -999; border: none; pointer-events: none; } \u003c/style\u003e ","wordCount":"1141","inLanguage":"zh","datePublished":"2024-04-29T00:00:00Z","dateModified":"2024-04-29T00:00:00Z","author":{"@type":"Person","name":"仟尘"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://post.tuclink.com/zh/post/hugo/web-shader/"},"publisher":{"@type":"Organization","name":"突触递质","logo":{"@type":"ImageObject","url":"https://post.tuclink.com/ico/64.ico"}}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-X1S233BKKP"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-X1S233BKKP")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1979660110676411" crossorigin=anonymous></script></head><body id=top><div id=container><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><style>#menu a{font-size:18px;font-weight:700}#menu .active{font-weight:700;border-bottom:2px solid;border-bottom-color:#42b983}</style><a href=https://post.tuclink.com/zh/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://post.tuclink.com/en/ title=English aria-label=English data-pjax=false>En</a></li></ul></div></div><ul id=menu><li><a href=https://post.tuclink.com/zh/archives/ title=列表 data-pjax=false><span>列表</span></a></li><li><a href=https://post.tuclink.com/zh/search/ title=搜索 data-pjax=false><span>搜索</span></a></li><li><a href=https://post.tuclink.com/zh/tags/ title=标签 data-pjax=false><span>标签</span></a></li><li><a href=https://post.tuclink.com/zh/post/ title=归档 data-pjax=false><span>归档</span></a></li></ul></nav></header><script></script><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://post.tuclink.com/zh/ data-pjax=false>主页</a>
&nbsp;»&nbsp;<a href=https://post.tuclink.com/zh/post/ data-pjax=false>文章</a>
&nbsp;»&nbsp;<a href=https://post.tuclink.com/zh/post/hugo/ data-pjax=false>Hugo</a></div><style>.breadcrumbs a{color:#848484;font-size:14px}</style><h1 class="post-title entry-hint-parent">为网站添加 WebGL 背景</h1><div class=post-description>WebGL 设置分享</div><div class=post-meta><span class=meta-item><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg>
<span>2024-4-29</span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg>
<span>1141 字</span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>3 分钟</span></span><span class=meta-item>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>仟尘</span></div></header><div class=post-content><hr><p>以下为核心的 HTML 代码，可以直接复制粘贴到网站的 HTML 文件中
我对 HTML 并不是非常熟悉，所以很可能有更好的实现方式，欢迎大家指正</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=cp>&lt;!DOCTYPE html&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>meta</span> <span class=na>charset</span><span class=o>=</span><span class=s>&#34;UTF-8&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>title</span><span class=p>&gt;</span>WebGL Example<span class=p>&lt;/</span><span class=nt>title</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=nt>body</span><span class=o>,</span> <span class=nt>html</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>padding</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>overflow</span><span class=p>:</span> <span class=kc>hidden</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>#</span><span class=nn>webgl-container</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>vw</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=kt>vh</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>overflow</span><span class=p>:</span> <span class=kc>hidden</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=p>#</span><span class=nn>webgl-canvas</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>top</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>left</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>head</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;webgl-container&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>canvas</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;webgl-canvas&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>canvas</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 初始化WebGL上下文
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>canvas</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s1>&#39;webgl-canvas&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>gl</span> <span class=o>=</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>getContext</span><span class=p>(</span><span class=s1>&#39;webgl&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 设置画布大小为全屏
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>function</span> <span class=nx>resizeCanvas</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>canvas</span><span class=p>.</span><span class=nx>width</span> <span class=o>=</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>clientWidth</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nx>canvas</span><span class=p>.</span><span class=nx>height</span> <span class=o>=</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>clientHeight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nx>gl</span><span class=p>.</span><span class=nx>viewport</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>width</span><span class=p>,</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;resize&#39;</span><span class=p>,</span> <span class=nx>resizeCanvas</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>resizeCanvas</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 顶点着色器代码
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>vertexShaderSource</span> <span class=o>=</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>      attribute vec2 position;
</span></span></span><span class=line><span class=cl><span class=sb>      void main() {
</span></span></span><span class=line><span class=cl><span class=sb>        gl_Position = vec4(position, 0.0, 1.0);
</span></span></span><span class=line><span class=cl><span class=sb>      }
</span></span></span><span class=line><span class=cl><span class=sb>    `</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 片元着色器代码
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>fragmentShaderSource</span> <span class=o>=</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>      precision highp float;
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float theme;
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>      uniform vec3 w_colour1;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform vec3 w_colour2;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform vec3 w_colour3;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform vec3 w_colour4;
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>      uniform vec3 b_colour1;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform vec3 b_colour2;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform vec3 b_colour3;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform vec3 b_colour4;
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>      uniform int contrast;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float gradual;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float width1;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float width2;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float scale1;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float scale2;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform vec2 offset;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float intensity;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float spin_speed;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float spin_amount;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float time;
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float canvas_width; // 新增画布宽度uniform变量
</span></span></span><span class=line><span class=cl><span class=sb>      uniform float canvas_height; // 新增画布高度uniform变量
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>      void main() {
</span></span></span><span class=line><span class=cl><span class=sb>        vec3 colour1 = mix(w_colour1, b_colour1, theme);
</span></span></span><span class=line><span class=cl><span class=sb>        vec3 colour2 = mix(w_colour2, b_colour2, theme);
</span></span></span><span class=line><span class=cl><span class=sb>        vec3 colour3 = mix(w_colour3, b_colour3, theme);
</span></span></span><span class=line><span class=cl><span class=sb>        vec3 colour4 = mix(w_colour4, b_colour4, theme);
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>        float speed = time * spin_speed;
</span></span></span><span class=line><span class=cl><span class=sb>        // 无拉伸屏幕 UV;
</span></span></span><span class=line><span class=cl><span class=sb>        vec2 uv = gl_FragCoord.xy / canvas_height;
</span></span></span><span class=line><span class=cl><span class=sb>        // 居中 UV
</span></span></span><span class=line><span class=cl><span class=sb>        float center = canvas_width / canvas_height;
</span></span></span><span class=line><span class=cl><span class=sb>        uv.y -= 0.5;
</span></span></span><span class=line><span class=cl><span class=sb>        uv.x -= 0.5 * center;
</span></span></span><span class=line><span class=cl><span class=sb>        uv *= 2.0;
</span></span></span><span class=line><span class=cl><span class=sb>        uv += offset;
</span></span></span><span class=line><span class=cl><span class=sb>        float uv_len = length(uv);
</span></span></span><span class=line><span class=cl><span class=sb>        // 获得角度信息
</span></span></span><span class=line><span class=cl><span class=sb>        float angle = atan(uv.y, uv.x);
</span></span></span><span class=line><span class=cl><span class=sb>        // 根据距离衰减旋转
</span></span></span><span class=line><span class=cl><span class=sb>        angle -= spin_amount * uv_len;
</span></span></span><span class=line><span class=cl><span class=sb>        // 角度旋转动画
</span></span></span><span class=line><span class=cl><span class=sb>        angle += speed;
</span></span></span><span class=line><span class=cl><span class=sb>        // 根据距离应用旋转
</span></span></span><span class=line><span class=cl><span class=sb>        uv = vec2(uv_len * cos(angle), uv_len * sin(angle)) * scale2;
</span></span></span><span class=line><span class=cl><span class=sb>        // UV 扭曲效果
</span></span></span><span class=line><span class=cl><span class=sb>        uv *= scale1;
</span></span></span><span class=line><span class=cl><span class=sb>        vec2 uv2 = vec2(uv.x + uv.y);
</span></span></span><span class=line><span class=cl><span class=sb>        for (int i = 0; i &lt; 5; i++) {
</span></span></span><span class=line><span class=cl><span class=sb>            uv2 += sin(uv);
</span></span></span><span class=line><span class=cl><span class=sb>            uv += vec2(cos(intensity * uv2.y + speed), sin(intensity * uv2.x - speed));
</span></span></span><span class=line><span class=cl><span class=sb>            uv -= cos(uv.x + uv.y) - sin(uv.x - uv.y);
</span></span></span><span class=line><span class=cl><span class=sb>        }
</span></span></span><span class=line><span class=cl><span class=sb>        // 强度值
</span></span></span><span class=line><span class=cl><span class=sb>        float paint_res = smoothstep(0.0, gradual, length(uv) / scale1);
</span></span></span><span class=line><span class=cl><span class=sb>        // 色块划分
</span></span></span><span class=line><span class=cl><span class=sb>        float c3p = 1.0 - min(width2, abs(paint_res - 0.5)) * (1.0 / width2);
</span></span></span><span class=line><span class=cl><span class=sb>        float c_out = max(0.0, (paint_res - (1.0 - width1))) * (1.0 / width1);
</span></span></span><span class=line><span class=cl><span class=sb>        float c_in = max(0.0, -(paint_res - width1)) * (1.0 / width1);
</span></span></span><span class=line><span class=cl><span class=sb>        float c4p = c_out + c_in;
</span></span></span><span class=line><span class=cl><span class=sb>        // 颜色应用
</span></span></span><span class=line><span class=cl><span class=sb>        vec3 ret_col = mix(colour1, colour2, paint_res);
</span></span></span><span class=line><span class=cl><span class=sb>        ret_col = mix(ret_col, colour3, c3p);
</span></span></span><span class=line><span class=cl><span class=sb>        ret_col = mix(ret_col, colour4, c4p);
</span></span></span><span class=line><span class=cl><span class=sb>        gl_FragColor = vec4(ret_col * mix(uv_len / 2.0, 1.0, theme), 1.0);
</span></span></span><span class=line><span class=cl><span class=sb>        // gl_FragColor = vec4(uv.y); // 纯红色
</span></span></span><span class=line><span class=cl><span class=sb>      }
</span></span></span><span class=line><span class=cl><span class=sb>    `</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 创建和编译着色器
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>vertexShader</span> <span class=o>=</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>createShader</span><span class=p>(</span><span class=nx>gl</span><span class=p>.</span><span class=nx>VERTEX_SHADER</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>shaderSource</span><span class=p>(</span><span class=nx>vertexShader</span><span class=p>,</span> <span class=nx>vertexShaderSource</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>compileShader</span><span class=p>(</span><span class=nx>vertexShader</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>fragmentShader</span> <span class=o>=</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>createShader</span><span class=p>(</span><span class=nx>gl</span><span class=p>.</span><span class=nx>FRAGMENT_SHADER</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>shaderSource</span><span class=p>(</span><span class=nx>fragmentShader</span><span class=p>,</span> <span class=nx>fragmentShaderSource</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>compileShader</span><span class=p>(</span><span class=nx>fragmentShader</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 创建程序对象并链接着色器
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>program</span> <span class=o>=</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>createProgram</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>attachShader</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=nx>vertexShader</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>attachShader</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=nx>fragmentShader</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>linkProgram</span><span class=p>(</span><span class=nx>program</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 检查链接是否成功
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>gl</span><span class=p>.</span><span class=nx>getProgramParameter</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>LINK_STATUS</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Unable to link the shader program: &#39;</span> <span class=o>+</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getProgramInfoLog</span><span class=p>(</span><span class=nx>program</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>gl</span><span class=p>.</span><span class=nx>getShaderParameter</span><span class=p>(</span><span class=nx>vertexShader</span><span class=p>,</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>COMPILE_STATUS</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failed to compile vertex shader: &#39;</span> <span class=o>+</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getShaderInfoLog</span><span class=p>(</span><span class=nx>vertexShader</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>gl</span><span class=p>.</span><span class=nx>getShaderParameter</span><span class=p>(</span><span class=nx>fragmentShader</span><span class=p>,</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>COMPILE_STATUS</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Failed to compile fragment shader: &#39;</span> <span class=o>+</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getShaderInfoLog</span><span class=p>(</span><span class=nx>fragmentShader</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=o>!</span><span class=nx>gl</span><span class=p>.</span><span class=nx>getProgramParameter</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>LINK_STATUS</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Unable to link the shader program: &#39;</span> <span class=o>+</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getProgramInfoLog</span><span class=p>(</span><span class=nx>program</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 使用程序对象
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>gl</span><span class=p>.</span><span class=nx>useProgram</span><span class=p>(</span><span class=nx>program</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 设置顶点数据
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>vertexData</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>Float32Array</span><span class=p>([</span>
</span></span><span class=line><span class=cl>      <span class=o>-</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=c1>// 第一个顶点
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=o>-</span><span class=mf>1.0</span><span class=p>,</span> <span class=o>-</span><span class=mf>1.0</span><span class=p>,</span> <span class=c1>// 第二个顶点
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=mf>1.0</span><span class=p>,</span> <span class=o>-</span><span class=mf>1.0</span><span class=p>,</span> <span class=c1>// 第三个顶点
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span> <span class=c1>// 第四个顶点
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>]);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 设置变量
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kr>const</span> <span class=nx>uniformLocations</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>theme</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;theme&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>w_colour1</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;w_colour1&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>w_colour2</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;w_colour2&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>w_colour3</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;w_colour3&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>w_colour4</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;w_colour4&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>b_colour1</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;b_colour1&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>b_colour2</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;b_colour2&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>b_colour3</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;b_colour3&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>b_colour4</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;b_colour4&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>contrast</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;contrast&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>gradual</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;gradual&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>width1</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;width1&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>width2</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;width2&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>scale1</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span><span class=s1>&#39;scale1&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>scale2</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span><span class=s1>&#39;scale2&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>offset</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;offset&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>intensity</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;intensity&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>spin_speed</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span><span class=s1>&#39;spin_speed&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>spin_amount</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span><span class=s1>&#39;spin_amount&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>time</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;time&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>canvas_width</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;canvas_width&#39;</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>canvas_height</span><span class=o>:</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getUniformLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;canvas_height&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 设置uniform变量的值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>theme</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform3f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>w_colour1</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.427</span><span class=p>,</span> <span class=mf>0.62</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform3f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>w_colour2</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.63</span><span class=p>,</span> <span class=mf>0.43</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform3f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>w_colour3</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform3f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>w_colour4</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform3f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>b_colour1</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.42</span><span class=p>,</span> <span class=mf>0.61</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform3f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>b_colour2</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.61</span><span class=p>,</span> <span class=mf>0.57</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform3f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>b_colour3</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform3f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>b_colour4</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1i</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>contrast</span><span class=p>,</span> <span class=mi>5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>gradual</span><span class=p>,</span> <span class=mf>2.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>width1</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>width2</span><span class=p>,</span> <span class=mf>0.1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>scale1</span><span class=p>,</span> <span class=mf>10.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>scale2</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform2f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>offset</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>intensity</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>spin_speed</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>spin_amount</span><span class=p>,</span> <span class=mf>1.5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>time</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>canvas_width</span><span class=p>,</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>width</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>canvas_height</span><span class=p>,</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>vertexBuffer</span> <span class=o>=</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>createBuffer</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>bindBuffer</span><span class=p>(</span><span class=nx>gl</span><span class=p>.</span><span class=nx>ARRAY_BUFFER</span><span class=p>,</span> <span class=nx>vertexBuffer</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>bufferData</span><span class=p>(</span><span class=nx>gl</span><span class=p>.</span><span class=nx>ARRAY_BUFFER</span><span class=p>,</span> <span class=nx>vertexData</span><span class=p>,</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>STATIC_DRAW</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>positionAttribLocation</span> <span class=o>=</span> <span class=nx>gl</span><span class=p>.</span><span class=nx>getAttribLocation</span><span class=p>(</span><span class=nx>program</span><span class=p>,</span> <span class=s1>&#39;position&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>vertexAttribPointer</span><span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=nx>positionAttribLocation</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=mi>2</span><span class=p>,</span> <span class=c1>// 每个顶点有2个分量(x, y)
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>gl</span><span class=p>.</span><span class=nx>FLOAT</span><span class=p>,</span> <span class=c1>// 数据类型是32位浮点数
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kc>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=mi>2</span> <span class=o>*</span> <span class=nx>Float32Array</span><span class=p>.</span><span class=nx>BYTES_PER_ELEMENT</span><span class=p>,</span> <span class=c1>// 步长
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=mi>0</span> <span class=c1>// 偏移量
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nx>gl</span><span class=p>.</span><span class=nx>enableVertexAttribArray</span><span class=p>(</span><span class=nx>positionAttribLocation</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>n_a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// 同步更新页面主题
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s1>&#39;storage&#39;</span><span class=p>,</span> <span class=p>(</span><span class=nx>event</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>localStorage</span><span class=p>.</span><span class=nx>getItem</span><span class=p>(</span><span class=s1>&#39;pref-theme&#39;</span><span class=p>)</span> <span class=o>===</span> <span class=s1>&#39;dark&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>a</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>a</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 初始化
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nb>window</span><span class=p>.</span><span class=nx>dispatchEvent</span><span class=p>(</span><span class=k>new</span> <span class=nx>Event</span><span class=p>(</span><span class=s1>&#39;storage&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=c1>// 清除画布并绘制三角形
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>function</span> <span class=nx>render</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 实时更新的值
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>time</span><span class=p>,</span> <span class=nx>performance</span><span class=p>.</span><span class=nx>now</span><span class=p>()</span> <span class=o>/</span> <span class=mf>1000.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>canvas_width</span><span class=p>,</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>width</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>canvas_height</span><span class=p>,</span> <span class=nx>canvas</span><span class=p>.</span><span class=nx>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>n_a</span> <span class=o>==</span> <span class=nx>a</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>n_a</span> <span class=o>=</span> <span class=nx>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>n_a</span> <span class=o>=</span> <span class=nx>lerpi</span><span class=p>(</span><span class=nx>n_a</span><span class=p>,</span> <span class=nx>a</span><span class=p>,</span> <span class=mf>0.4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>gl</span><span class=p>.</span><span class=nx>uniform1f</span><span class=p>(</span><span class=nx>uniformLocations</span><span class=p>.</span><span class=nx>theme</span><span class=p>,</span> <span class=nx>n_a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>      <span class=nx>gl</span><span class=p>.</span><span class=nx>clearColor</span><span class=p>(</span><span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>gl</span><span class=p>.</span><span class=nx>clear</span><span class=p>(</span><span class=nx>gl</span><span class=p>.</span><span class=nx>COLOR_BUFFER_BIT</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>gl</span><span class=p>.</span><span class=nx>drawArrays</span><span class=p>(</span><span class=nx>gl</span><span class=p>.</span><span class=nx>TRIANGLE_FAN</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>4</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=nx>requestAnimationFrame</span><span class=p>(</span><span class=nx>render</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>render</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 插值
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kd>function</span> <span class=nx>lerpi</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span><span class=p>,</span> <span class=nx>t</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nx>a</span> <span class=o>+</span> <span class=p>(</span> <span class=nx>b</span> <span class=o>-</span> <span class=nx>a</span> <span class=p>)</span> <span class=o>*</span> <span class=nx>t</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>body</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>html</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>只需要将以上 HTML 文件插入到页面中</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>iframe</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;webgl-background&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;/html/WebGL.html&#34;</span> <span class=na>width</span><span class=o>=</span><span class=s>&#34;100%&#34;</span> <span class=na>height</span><span class=o>=</span><span class=s>&#34;100%&#34;</span> <span class=na>frameborder</span><span class=o>=</span><span class=s>&#34;0&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>iframe</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>再设置一下 CSS 样式即可作为背景使用</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;!</span><span class=nt>--</span> <span class=nt>头像缩放适配</span> <span class=nt>--</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;!</span><span class=nt>--</span> <span class=nt>背景</span><span class=o>/</span><span class=nt>隐藏滚动条</span> <span class=nt>--</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=nt>style</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl><span class=nt>iframe</span><span class=p>#</span><span class=nn>webgl-background</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>position</span><span class=p>:</span> <span class=kc>fixed</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>top</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>left</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>vw</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=kt>vh</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>z-index</span><span class=p>:</span> <span class=mi>-999</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>border</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>pointer-events</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>style</span><span class=p>&gt;</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://post.tuclink.com/zh/tags/hugo/ data-pjax=false>Hugo</a></li></ul><nav class=post-paginav><a class=post-prev-link href=https://post.tuclink.com/zh/post/story/lonely/ data-pjax=false><span class=title>« 上一页</span><br><span class=post-prev-title>第一章 尘封 新生</span>
</a><a class=post-next-link href=https://post.tuclink.com/zh/post/hugo/hugo-picture-2/ data-pjax=false><span class=title>下一页 »</span><br><span class=post-next-title>Hugo 图库 nanogallery 方案</span></a></nav><style>.post-paginav{display:flex;justify-content:space-between;align-items:flex-start}.post-prev-link,.post-next-link{width:100%;display:inline-block}.post-prev-link{text-align:left}.post-next-link{text-align:right}.post-prev-title,.post-next-title{max-width:200px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block;vertical-align:middle}.post-prev-link,.post-next-link{text-decoration:none;transition:transform .4s}.post-prev-link:hover,.post-next-link:hover{text-decoration:underline;text-decoration-color:#42b983;text-decoration-thickness:2px;text-underline-offset:4px;transform:scale(1.05)}.title{font-size:20px;font-weight:700}</style></footer><script data-pjax src=https://giscus.app/client.js data-repo=Az-qianchen/Tuclink data-repo-id=R_kgDOLdBkxQ data-category=Polls data-category-id=DIC_kwDOLdBkxc4Cdypd data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://post.tuclink.com/zh/>突触递质</a></span> -
<span>Page</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script src=https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script>const images=Array.from(document.querySelectorAll(".post-content img"));images.forEach(e=>{e.classList.contains("gallery-item")||mediumZoom(e,{margin:0,scrollOffset:40,container:null,template:null,background:"rgba(0, 0, 0, 0.8)"})})</script><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>$(document).on("pjax:end",function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub])})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></div></body></html><style>.post-content img{border-radius:10px;margin:1rem 0}</style><style>.main{position:relative;min-height:calc(100dvh - var(--header-height) - var(--footer-height));max-width:calc(var(--main-width) + var(--gap) * 2);margin:auto;padding:var(--gap)}.main .profile{align-items:center;min-height:calc(100dvh - var(--header-height) - var(--footer-height) - (var(--gap) * 2));text-align:center}</style>